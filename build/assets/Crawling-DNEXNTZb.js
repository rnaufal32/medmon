import{K as v,r as y,j as e,L as w,S as x}from"./app-B-RYIvRY.js";import{A as N}from"./AdminLayout-CEWLwKlY.js";import{I as k}from"./index-DPa05w-1.js";import{I as o}from"./Input-hhpOWbwY.js";import{u as c}from"./index.es-DY2R93iy.js";import{S as g}from"./index.esm-C_MpZT6u.js";function T(){var b;const{data:l,flash:a,targets:r}=v().props,n=c(!1),i=c(""),t=c(l),p=(r==null?void 0:r.map(s=>({label:`${s.user.name} - ${s.name}`,value:`${s.id}`})))??[],d=c(null),h=[{value:"neutral",label:"neutral"},{value:"positive",label:"positive"},{value:"negative",label:"negative"}],m=c(null),f=()=>{n.set(!0),x.post(route("news.crawling"),{url:i.get()},{onFinish:()=>{n.set(!1)}})},j=()=>{n.set(!0),x.post(route("news.crawling.store"),{title:t.title.get(),content:t.content.get(),date:t.date.get(),images:t.images.get(),journalist:t.journalist.get(),relevant:d.get().value,sentiment:m.get().value,source:t.source.get(),spookerperson:t.spookerperson.get(),summary:t.summary.get(),target_id:d.get(),url:i.get()},{onSuccess:s=>{var u;n.set(!1),(u=s.props.flash)!=null&&u.success&&(i.set(""),t.set({}))}})};return y.useEffect(()=>{if(l!=null&&(t.set(l),m.set({label:l.sentiment,value:l.sentiment}),l.relevant.length>0)){const s=r==null?void 0:r.find(u=>u.id===l.relevant[0]);s!=null&&d.set({label:`${s.user.name} - ${s.name}`,value:`${s.id}`})}},[l,r]),e.jsxs(N,{children:[e.jsx(w,{title:"News Crawling"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx("a",{href:route("news.index"),className:"py-3 px-4 flex justify-center items-center size-[30px] text-sm font-medium rounded-lg border border-transparent bg-gray-300 text-black focus:outline-none disabled:opacity-50 disabled:pointer-events-none",children:e.jsx(k,{width:23,height:23,icon:"solar:arrow-left-broken"})}),e.jsx("p",{className:"text-xl font-bold",children:"News Crawling"})]}),(a==null?void 0:a.error)&&e.jsx("div",{className:"mt-2 bg-red-500 text-sm text-white rounded-lg p-4",role:"alert",tabIndex:-1,"aria-labelledby":"hs-solid-color-danger-label",children:a.error}),(a==null?void 0:a.success)&&e.jsx("div",{className:"mt-2 bg-teal-500 text-sm text-white rounded-lg p-4",role:"alert",tabIndex:-1,"aria-labelledby":"hs-solid-color-success-label",children:a.success}),e.jsxs("div",{className:"flex flex-col gap-3 bg-white border border-gray-200 shadow-sm rounded-xl p-4 md:p-5",children:[e.jsx(o,{type:"url",value:i.get(),onChange:s=>{i.set(s)},placeholder:"Url"}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:f,disabled:n.get(),className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none",children:[n.get()&&e.jsx("span",{className:"animate-spin inline-block size-4 border-[3px] border-current border-t-transparent text-white rounded-full",role:"status","aria-label":"loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})," Submit"]})})]}),((b=t.title)==null?void 0:b.get())&&e.jsx("div",{className:"flex flex-col gap-3 bg-white border border-gray-200 shadow-sm rounded-xl p-4 md:p-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"User Target"}),e.jsx(g,{options:p,value:d.get(),onChange:s=>{d.set(s)},primaryColor:"#FFF"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),e.jsx(o,{type:"text",value:t.title.get(),onChange:s=>{t.title.set(s)},placeholder:"Title"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),e.jsx(o,{type:"date",value:t.date.get(),onChange:s=>{t.date.set(s)},placeholder:"Date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Journalist"}),e.jsx(o,{type:"text",value:t.journalist.get(),onChange:s=>{t.journalist.set(s)},placeholder:"Journalist"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sentiment"}),e.jsx(g,{options:h,value:m.get(),onChange:s=>{m.set(s)},primaryColor:"#FFF"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spookerperson"}),e.jsx(o,{type:"text",value:t.spookerperson.get(),onChange:s=>{t.spookerperson.set(s)},placeholder:"Spokerperson"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Image"}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(o,{type:"text",value:t.images.get(),onChange:s=>{t.images.set(s)},placeholder:"Images"}),e.jsx("div",{children:e.jsx("a",{href:t.images.get(),target:"_blank",className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none",children:"Open"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content"}),e.jsx("textarea",{rows:8,onChange:s=>{t.content.set(s.target.value)},value:t.content.get(),className:"py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Summary"}),e.jsx("textarea",{rows:8,onChange:s=>{t.summary.set(s.target.value)},value:t.summary.get(),className:"py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:j,disabled:n.get(),className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none",children:[n.get()&&e.jsx("span",{className:"animate-spin inline-block size-4 border-[3px] border-current border-t-transparent text-white rounded-full",role:"status","aria-label":"loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})," Submit"]})})]})})]})]})}export{T as default};
